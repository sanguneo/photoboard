<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../assets/css/xpboard.min.css?v=1">
    <title>ì‚¬ì§„ë³´ë“œíŒ</title>
</head>

<body>

    <div class="container preview">
    
        <!-- ================================
           ğŸ“Œ í—¤ë” ì˜ì—­ (ë’¤ë¡œê°€ê¸° + íƒ€ì´í‹€ + íˆ´íŒ)
           ================================ -->
        <header class="header" aria-label="ì•± ìƒë‹¨ í—¤ë”">
            <!-- ğŸ”™ ë’¤ë¡œê°€ê¸° ë²„íŠ¼ -->
            <a href="../../index.html" type="button" class="icon-btn" aria-label="ë‹«ê¸°">
                <img src="../../assets/images/close-btn.svg" alt="ë‹«ê¸° ì•„ì´ì½˜"> 
            </a>
            <!-- ğŸ“„ íƒ€ì´í‹€ -->
            <h2>ì„œë¹„ìŠ¤ ë¯¸ë¦¬ë³´ê¸°</h2>
        </header>
    
        <main class="preview-content" aria-label="ì„œë¹„ìŠ¤ ë¯¸ë¦¬ë³´ê¸° ì•ˆë‚´" tabindex="-1">
            <div class="preview-progress" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"
                aria-label="ì§„í–‰ë¥ ">
                <div class="progressbar-bar"></div>
            </div>
            <div class="preview-step-box" data-step="1" role="tabpanel" aria-labelledby="step-label-1">
                <div class="preview-step">
                    <span id="step-label-1" class="step-count"  aria-current="step" tabindex="-1">1 / 5</span>
                </div>
                <div class="preview-text">
                    <p>í˜„ì¥ì—ì„œ ë³´ë“œíŒ ì‘ì„±ì´<br>ì–´ë ¤ì› ë‚˜ìš”?</p>
                </div>
                <div class="preview-img" role="img" aria-label="í˜„ì¥ ì‚¬ì§„ ì˜ˆì‹œ ì´ë¯¸ì§€1">
                    <img src="../../assets/images/img_preview_1.png" alt="ë¯¸ë¦¬ë³´ê¸°1 ì´ë¯¸ì§€">
                </div>
            </div>
            <div class="preview-step-box" data-step="2" role="tabpanel" aria-labelledby="step-label-2" hidden>
                <div class="preview-step"><span id="step-label-2" class="step-count"  tabindex="-1">2 / 5</span></div>
                <div class="preview-text">
                    <p>ì´ì œ ì‚¬ì§„ë³´ë“œíŒìœ¼ë¡œ<br>
                    ê°„í¸í•˜ê²Œ ë³´ë“œíŒì„ ì‘ì„±í•˜ê³ </p>
                </div>
                <div class="preview-img" role="img" aria-label="í˜„ì¥ ì‚¬ì§„ ì˜ˆì‹œ ì´ë¯¸ì§€2">
                    <img src="../../assets/images/img_preview_2.png" alt="ë¯¸ë¦¬ë³´ê¸°1 ì´ë¯¸ì§€">
                </div>
            </div>
            <div class="preview-step-box" data-step="3" role="tabpanel" aria-labelledby="step-label-3" hidden>
                <div class="preview-step"><span id="step-label-3" class="step-count"  tabindex="-1">3 / 5</span></div>
                <div class="preview-text">
                    <p>í˜„ì¥ì—ì„œ ì´¬ì˜í•´ì„œ<br>
                    ì‚¬ì§„ ë³´ë“œíŒì„ ì™„ì„±í•  ìˆ˜ ìˆì–´ìš”.</p>
                </div>
                <div class="preview-img" role="img" aria-label="í˜„ì¥ ì‚¬ì§„ ì˜ˆì‹œ ì´ë¯¸ì§€3">
                    <img src="../../assets/images/img_preview_3.png" alt="ë¯¸ë¦¬ë³´ê¸°1 ì´ë¯¸ì§€">
                </div>
            </div>
            <div class="preview-step-box" data-step="4" role="tabpanel" aria-labelledby="step-label-4" hidden>
                <div class="preview-step"><span id="step-label-4" class="step-count"  tabindex="-1">4 / 5</span></div>
                <div class="preview-text">
                    <p>ì €ì¥í•œ ì‚¬ì§„ë³´ë“œíŒì€<br>
                    Xpë¬¸ì„œí•¨ì— ìë™ ì €ì¥ë¼ìš”.</p>
                </div>
                <div class="preview-img" role="img" aria-label="í˜„ì¥ ì‚¬ì§„ ì˜ˆì‹œ ì´ë¯¸ì§€4">
                    <img src="../../assets/images/img_preview_4.png" alt="ë¯¸ë¦¬ë³´ê¸°1 ì´ë¯¸ì§€">
                </div>
            </div>
            <div class="preview-step-box" data-step="5" role="tabpanel" aria-labelledby="step-label-5" hidden>
                <div class="preview-step"><span id="step-label-5" class="step-count"  tabindex="-1">5 / 5</span></div>
                <div class="preview-text">
                    <div class="preview-error-badge ">
                        <span class="icon">
                            <img src="../../assets/images/error-line.svg" alt="ê²½ê³  ì•„ì´ì½˜">
                        </span>
                        <span>ë°ì´í„° ì‚¬ìš©ì´ ê±±ì •ëœë‹¤ë©´</span>
                    </div>
                    <p>Wi-Fi ëª¨ë“œì—ì„œë§Œ ì „ì†¡ë˜ë„ë¡<br>
                    ì„¤ì •ì„ ë³€ê²½í•´ ì£¼ì„¸ìš”.</p>
                </div>
                <div class="preview-img" role="img" aria-label="í˜„ì¥ ì‚¬ì§„ ì˜ˆì‹œ ì´ë¯¸ì§€5">
                    <img src="../../assets/images/img_preview_5.png" alt="ë¯¸ë¦¬ë³´ê¸°1 ì´ë¯¸ì§€">
                </div>
            </div>
            <nav class="foot-button-box" aria-label="ì§„í–‰ ë²„íŠ¼">
                <button type="button" class="button button-large primary-line" id="prevBtn">ì´ì „</button>
                <button type="button" class="button button-large primary-fill" id="nextBtn">ë‹¤ìŒ</button>
                <button type="button" class="button button-large primary-fill" id="closeBtn" style="display:none;">ë‹«ê¸°</button>
            </nav>
        </main>


    </div>

</body>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const totalStep = 5;
        let currentStep = 1;
        let prevStep = 1; // ì´ì „ step ê¸°ì–µ

        const bar = document.querySelector('.progressbar-bar');
        const progressWrap = document.querySelector('.preview-progress');
        const stepBoxes = document.querySelectorAll('.preview-step-box');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const closeBtn = document.getElementById('closeBtn');
        const main = document.querySelector('.preview-content');

        // ìˆ«ì ì¹´ìš´íŠ¸ ì• ë‹ˆë©”ì´ì…˜ í•¨ìˆ˜
        function animateStepCount(targetSpan, from, to, total) {
            if (!targetSpan) return;
            if (from === to) {
                targetSpan.textContent = `${to} / ${total}`;
                return;
            }
            let start = null;
            const duration = 350;
            function step(ts) {
                if (!start) start = ts;
                const progress = Math.min((ts - start) / duration, 1);
                const current = Math.round(from + (to - from) * progress);
                targetSpan.textContent = `${current} / ${total}`;
                if (progress < 1) {
                    requestAnimationFrame(step);
                }
            }
            requestAnimationFrame(step);
        }

        function updateProgress() {
            // í”„ë¡œê·¸ë˜ìŠ¤ë°” ì§„í–‰ë„
            const percent = Math.round((currentStep / totalStep) * 100);
            bar.style.width = percent + '%';
            progressWrap.setAttribute('aria-valuenow', percent);

            // .full í´ë˜ìŠ¤ ì œì–´ (ë§ˆì§€ë§‰ì´ë©´ border-radius 0)
            if (currentStep === totalStep) {
                bar.classList.add('full');
            } else {
                bar.classList.remove('full');
            }

            // step box show/hide + step number ì• ë‹ˆë©”ì´ì…˜ + a11y
            stepBoxes.forEach((box, idx) => {
                const stepCountSpan = box.querySelector('.step-count');
                if (idx === currentStep - 1) {
                    box.removeAttribute('hidden');
                    if (stepCountSpan) {
                        animateStepCount(stepCountSpan, prevStep, currentStep, totalStep);
                        stepCountSpan.setAttribute('aria-current', 'step');
                        setTimeout(() => { stepCountSpan.focus(); }, 100);
                    }
                } else {
                    box.setAttribute('hidden', '');
                    if (stepCountSpan) stepCountSpan.removeAttribute('aria-current');
                }
            });

            // ë²„íŠ¼ ìƒíƒœ
            prevBtn.disabled = currentStep === 1;
            nextBtn.style.display = (currentStep === totalStep) ? 'none' : '';
            closeBtn.style.display = (currentStep === totalStep) ? '' : 'none';

            // ì—…ë°ì´íŠ¸ ëë‚˜ë©´ prevStep ê°’ ê°±ì‹ 
            prevStep = currentStep;
        }

        nextBtn.addEventListener('click', () => {
            if (currentStep < totalStep) currentStep++;
            updateProgress();
        });

        prevBtn.addEventListener('click', () => {
            if (currentStep > 1) currentStep--;
            updateProgress();
        });

        closeBtn.addEventListener('click', () => {
            alert('ì˜¨ë³´ë”© ì¢…ë£Œ!');
            // ëª¨ë‹¬ ë‹«ê¸°, í˜ì´ì§€ ì´ë™ ë“± ì›í•˜ëŠ” ë™ì‘ ì¶”ê°€
        });

        // ìµœì´ˆ 1íšŒ ì‹¤í–‰ (ì ‘ê·¼ì„±: ë©”ì¸ í¬ì»¤ìŠ¤)
        updateProgress();
        main.focus();
    });


</script>
<script src="../../assets/js/common.js"></script>
</html>