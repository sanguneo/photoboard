<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../assets/css/xpboard.min.css?v=1">
    <title>ÏÇ¨ÏßÑÎ≥¥ÎìúÌåê</title>
</head>

<body>
    <!-- ‚úÖ ÌÜ†Ïä§Ìä∏ Î©îÏãúÏßÄ: ÏÇ¨Ïö©Ïûê ÏûÖÎ†• Ïò§Î•ò ÏïàÎÇ¥ -->
    <div class="toast-container" aria-live="polite" aria-hidden="true">
        <div class="toast-validation">
            <span class="icon">
                <img src="../../assets/images/error.svg" alt="Í≤ΩÍ≥† ÏïÑÏù¥ÏΩò">
            </span>
            <span>2Ïûê Ïù¥ÏÉÅ ÏûëÏÑ±Ìï¥ Ï£ºÏÑ∏Ïöî.</span>
        </div>
    </div>
    
    <!-- ‚úÖ ÏÇ¨ÏßÑ ÏÑ†ÌÉù Î™®Îã¨ -->
    <div class="modal-dim" style="display: none" aria-hidden="true">
        <div class="modal modal-pop" role="dialog" aria-modal="true" aria-labelledby="modal-title">
            <h2 id="modal-title" class="modal-title">Î≥¥ÎìúÌåê ÏÇ¨ÏßÑ ÏÑ†ÌÉù</h2>
            <div class="modal-list">
                <ul class="modal-list-menu">
                    <li class="modal-list-item">
                        <button type="button" class="modal-list-btn">ÏÇ¨ÏßÑ Ï¥¨ÏòÅ</button>
                    </li>
                    <li class="modal-list-item">
                        <button type="button" class="modal-list-btn">Í∞§Îü¨Î¶¨ÏóêÏÑú ÏÇ¨ÏßÑ ÏÑ†ÌÉù</button>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    
    <div class="container bg-content regist-type" aria-label="ÏÇ¨ÏßÑÎì±Î°ù ÌÉÄÏûÖ">
        <!-- ‚úÖ ÏÉÅÎã® Ìó§Îçî -->
        <header class="header" aria-label="ÏÇ¨ÏßÑ Îì±Î°ù ÏÉÅÎã® Ìó§Îçî">
            <a href="../../index.html" type="button" class="icon-btn" aria-label="Îí§Î°úÍ∞ÄÍ∏∞">
                <img src="../../assets/images/back.svg" alt="Îí§Î°úÍ∞ÄÍ∏∞ ÏïÑÏù¥ÏΩò">
            </a>
            <h2>ÏÇ¨ÏßÑ Îì±Î°ù</h2>
    
            <!-- üìå Ïπ¥Î©îÎùº Î∞è ÏÑ§Ï†ï Î≤ÑÌäº -->
            <div class="board-head-btn">
                <button type="button" class="icon-btn" aria-label="Ïπ¥Î©îÎùº">
                    <img src="../../assets/images/camera.svg" alt="Ïπ¥Î©îÎùº ÏïÑÏù¥ÏΩò">
                </button>
                <a href="boardSetting.html" class="icon-btn" aria-label="ÏÇ¨ÏßÑ Îì±Î°ù ÏÑ§Ï†ï">
                    <img src="../../assets/images/setting.svg" alt="ÏÑ§Ï†ï ÏïÑÏù¥ÏΩò">
                </a>
            </div>
        </header>
    
        <!-- ‚úÖ Î©îÏù∏ ÏΩòÌÖêÏ∏† -->
        <main aria-label="ÏÇ¨ÏßÑ Îì±Î°ù Î©îÏù∏ ÏΩòÌÖêÏ∏†">
    
            <!-- üìÑ ÏûëÏÑ± Ìèº -->
            <section class="board-register-top" aria-label="ÏÇ¨ÏßÑ Ï†ïÎ≥¥ ÏûÖÎ†• ÏòÅÏó≠">
                <ul class="form-list" role="list">
                    <li class="form-list-item">
                        <label for="input-title">Îã®ÏßÄÎ™Ö</label>
                        <div class="form-wrap">
                            <input class="error" id="input-title" type="text" placeholder="Í¥ëÍµêÏûêÏù¥ÎçîÌÅ¥ÎûòÏä§" />
                            <button type="button" class="icon-btn clear-btn" aria-hidden="true" aria-label="Ï¥àÍ∏∞Ìôî">
                                <img src="../../assets/images/clear.svg" alt="Ï¥àÍ∏∞Ìôî">
                            </button>
                        </div>
                    </li>
                    <li class="form-list-item">
                        <label for="input-location">ÏúÑÏπò</label>
                        <div class="form-wrap">
                            <input id="input-location" type="text" placeholder="ÏÇ¨ÏßÑ ÏúÑÏπòÎ•º ÏûëÏÑ±Ìï¥ Ï£ºÏÑ∏Ïöî." />
                            <button type="button" class="icon-btn clear-btn" aria-hidden="true" aria-label="Ï¥àÍ∏∞Ìôî">
                                <img src="../../assets/images/clear.svg" alt="Ï¥àÍ∏∞Ìôî">
                            </button>
                        </div>
                    </li>
                    <li class="form-list-item">
                        <label for="input-description">ÎÇ¥Ïö©</label>
                        <div class="form-wrap">
                            <input id="input-description" type="text" placeholder="ÏòàÏãú) ÏÜåÎ∞© Ï†êÍ≤Ä" />
                            <button type="button" class="icon-btn clear-btn" aria-hidden="true" aria-label="Ï¥àÍ∏∞Ìôî">
                                <img src="../../assets/images/clear.svg" alt="Ï¥àÍ∏∞Ìôî">
                            </button>
                        </div>
                    </li>
                    <li class="form-list-item">
                        <label >ÎÇ†Ïßú</label>
                        <div class="form-wrap">
                            <input id="input-date" type="date"/>
                            <label for="input-date"></label>
                            <button type="button" class="icon-btn clear-btn" aria-hidden="true" aria-label="Ï¥àÍ∏∞Ìôî">
                                <img src="../../assets/images/clear.svg" alt="Ï¥àÍ∏∞Ìôî">
                            </button>
                        </div>
                    </li>
                </ul>
            </section>
    
            <!-- üì∑ ÏÇ¨ÏßÑ Îì±Î°ù Î∞è ÎØ∏Î¶¨Î≥¥Í∏∞ -->
            <section class="board-register-body" aria-label="ÏÇ¨ÏßÑ ÎØ∏Î¶¨Î≥¥Í∏∞ Î∞è ÏÑ†ÌÉù">
                <!-- ÏÇ¨ÏßÑ ÏÑ†ÌÉù Î≤ÑÌäº -->
                <div class="images-selector" aria-hidden="false">
                    <button type="button" class="images-selector-btn icon-btn" aria-label="ÏÇ¨ÏßÑ Îì±Î°ù Î∞è Í∞§Îü¨Î¶¨ ÏÑ†ÌÉù">
                        <img src="../../assets/images/images-select.svg" alt="ÏÇ¨ÏßÑ ÏÑ†ÌÉù ÏïÑÏù¥ÏΩò">
                    </button>
                    <p class="images-selector-guide">
                        ÏÇ¨ÏßÑ Ï¥¨ÏòÅ ÎòêÎäî Í∞§Îü¨Î¶¨ÏóêÏÑú<br>ÏÇ¨ÏßÑÏùÑ ÏÑ†ÌÉùÌï¥ Ï£ºÏÑ∏Ïöî.
                    </p>
                </div>
    
                <!-- ÎØ∏Î¶¨Î≥¥Í∏∞ Ï†ïÎ≥¥ -->
                <div class="board-preview" aria-hidden="true">
                    <div class="board-preview-warp">
                        <div class="board-preview-panel">
                            <table>
                                <tbody>
                                    <tr>
                                        <th scope="row">Îã®ÏßÄÎ™Ö</th>
                                        <td><span id="preview-title">-</span></td>
                                    </tr>
                                    <tr>
                                        <th scope="row">ÏúÑÏπò</th>
                                        <td><span id="preview-location">-</span></td>
                                    </tr>
                                    <tr>
                                        <th scope="row">ÎÇ¥Ïö©</th>
                                        <td><span id="preview-description">-</span></td>
                                    </tr>
                                    <tr>
                                        <th scope="row">ÎÇ†Ïßú</th>
                                        <td><span id="preview-date">-</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <img src="../../assets/images/test-img.png" alt="ÏÑ†ÌÉùÎêú ÏÇ¨ÏßÑ ÎØ∏Î¶¨Î≥¥Í∏∞">
                    </div>
                </div>
            </section>
    
            <!-- ‚úÖ ÌïòÎã® Ïï°ÏÖò Î≤ÑÌäº -->
            <section class="board-register-footer" aria-label="ÏÇ¨ÏßÑ Îì±Î°ù Ï†úÏ∂ú Î≤ÑÌäº ÏòÅÏó≠">
                <button type="submit" class="button primary-fill" disabled aria-disabled="true">
                    ÏÇ¨ÏßÑ Î≥¥ÎìúÌåê Ï†ÄÏû•
                </button>
                <a href="boardEdit.html" >
                <button class="button button--icon" aria-label="ÌôîÏÇ¥Ìëú Ìé∏Ïßë ÌéòÏù¥ÏßÄ Ïù¥Îèô">
                    
                    <img src="../../assets/images/btn-arrow.svg" alt="ÌôîÏÇ¥Ìëú ÏïÑÏù¥ÏΩò">
                    <span class="btn-icon-title">ÌôîÏÇ¥Ìëú</span>
                </button>
                </a>
            </section>
    
        </main>
    </div>
    </body>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        // --- ÏûÖÎ†• Î∞è ÌîÑÎ¶¨Î∑∞ Ïó∞Í≤∞ ---
        const inputs = {
            title: document.getElementById("input-title"),
            location: document.getElementById("input-location"),
            description: document.getElementById("input-description"),
            date: document.getElementById("input-date"),
        };

        const previews = {
            title: document.getElementById("preview-title"),
            location: document.getElementById("preview-location"),
            description: document.getElementById("preview-description"),
            date: document.getElementById("preview-date"),
        };

        const toast = document.querySelector(".toast-container");
        const submitBtn = document.querySelector(".button.primary-fill");
        const iconBtn = document.querySelector(".button.button--icon");

        // --- ÌÅ¥Î¶¨Ïñ¥ Î≤ÑÌäº ÌÅ¥Î¶≠Ïãú Ìï¥Îãπ input ÎπÑÏö∞Í∏∞ ---
        document.querySelectorAll('.clear-btn').forEach(btn => {
            // mousedown ÏÇ¨Ïö©: ÌÅ¥Î¶≠ Ï†ÑÏóê input blur Ïïà ÏùºÏñ¥ÎÇòÍ≤å!
            btn.addEventListener('mousedown', function (e) {
                e.preventDefault(); // Î≤ÑÌäºÏóê Ìè¨Ïª§Ïä§ Î∞©ÏßÄ
                const input = btn.parentElement.querySelector('input[type="text"], input[type="date"]');
                if (input) {
                    input.value = "";
                    input.dispatchEvent(new Event("input")); // ÏÉÅÌÉú Ï¶âÏãú Î∞òÏòÅ
                    // input.blur(); // ÌïÑÏöîÌïòÎ©¥ Ìè¨Ïª§Ïä§ ÏïÑÏõÉ
                }
            });
        });

        // --- ÌÅ¥Î¶¨Ïñ¥ Î≤ÑÌäº show/hide (Ìè¨Ïª§Ïä§ ÏÉÅÌÉúÏóêÏÑúÎßå ÎÖ∏Ï∂ú!) ---
        function updateClearBtns() {
            Object.values(inputs).forEach(input => {
                const clearBtn = input.parentElement.querySelector('.clear-btn');
                if (!clearBtn) return;

                if (document.activeElement === input && input.value.trim() !== "") {
                    clearBtn.style.visibility = "visible";
                    clearBtn.setAttribute("aria-hidden", "false");
                    clearBtn.style.pointerEvents = "auto";
                } else {
                    clearBtn.style.visibility = "hidden";
                    clearBtn.setAttribute("aria-hidden", "true");
                    clearBtn.style.pointerEvents = "none";
                }
            });
        }

        // --- ÌîÑÎ¶¨Î∑∞/Î≤ÑÌäº ÌôúÏÑ±Ìôî/ÌÅ¥Î¶¨Ïñ¥ Î≤ÑÌäº ---
        function updatePreview() {
            previews.title.textContent = inputs.title.value;
            previews.location.textContent = inputs.location.value;
            previews.description.textContent = inputs.description.value;
            previews.date.textContent = formatDate(inputs.date.value);

            updateClearBtns();

            // Î≤ÑÌäº ÌôúÏÑ±Ìôî Ï°∞Í±¥
            const allFilled = Object.values(inputs).every(input => input.value.trim() !== '');
            submitBtn.disabled = !allFilled;
            iconBtn.disabled = !allFilled;

            const iconImg = iconBtn.querySelector('img');
            if (allFilled) {
                iconImg.src = '../../assets/images/btn-arrow.svg';
            } else {
                iconImg.src = '../../assets/images/btn-arrow-disabled.svg';
            }
        }

        // ÎÇ†Ïßú ÌòïÏãù Î≥ÄÌôò (Ïòà: 2025ÎÖÑ 09Ïõî 21Ïùº)
        function formatDate(dateStr) {
            if (!dateStr) return "";
            const date = new Date(dateStr);
            return `${date.getFullYear()}ÎÖÑ ${String(date.getMonth() + 1).padStart(2, '0')}Ïõî ${String(date.getDate()).padStart(2, '0')}Ïùº`;
        }

        // input Ïù¥Î≤§Ìä∏ Ïó∞Í≤∞ (ÏóÖÎç∞Ïù¥Ìä∏+ÌÅ¥Î¶¨Ïñ¥ Î≤ÑÌäº ÎèôÍ∏∞Ìôî)
        Object.values(inputs).forEach(input => {
            input.addEventListener("input", updatePreview);
            input.addEventListener("focus", updateClearBtns);
            input.addEventListener("blur", updateClearBtns);
        });

        // ÌÉÄÏù¥ÌãÄ ÏûÖÎ†•Ïãú ÌÜ†Ïä§Ìä∏
        inputs.title.addEventListener("input", () => {
            toast.setAttribute("aria-hidden", "false");
            clearTimeout(toast.timer);
            toast.timer = setTimeout(() => {
                toast.setAttribute("aria-hidden", "true");
            }, 1000);
        });

        // ÏµúÏ¥à ÏÉÅÌÉú ÏÑ∏ÌåÖ
        updatePreview();
    });

    // ---- Ïó¨Í∏∞ÍπåÏßÄ form/ÌîÑÎ¶¨Î∑∞/ÌÅ¥Î¶¨Ïñ¥ Î≤ÑÌäº Í¥ÄÎ¶¨ ----

    document.addEventListener('DOMContentLoaded', () => {
        const modalDim = document.querySelector('.modal-dim');
        const imagesSelector = document.querySelector('.images-selector');
        const boardPreview = document.querySelector('.board-preview');
        const openModalBtn = document.querySelector('.images-selector-btn');
        const modalButtons = document.querySelectorAll('.modal-list-btn');
        // Î™®Îã¨ Ïô∏ ÏòÅÏó≠ (Î©îÏù∏ ÏΩòÌÖêÏ∏†) - aria-hidden Ï≤òÎ¶¨Ïö©
        const mainContent = document.querySelector('main');
        // Ìè¨Ïª§Ïä§ Î≥µÍ∑ÄÏö© Ï†ÄÏû•
        let lastFocusedElement = null;

        function openModal() {
            lastFocusedElement = document.activeElement;
            modalDim.style.display = 'flex';
            modalDim.setAttribute('aria-hidden', 'false');
            imagesSelector.setAttribute('aria-hidden', 'true');
            // mainContent.setAttribute('aria-hidden', 'true');
            // Î™®Îã¨ ÎÇ¥ Ï≤´ Î≤ÑÌäº Ìè¨Ïª§Ïä§
            modalButtons[0].focus();
            boardPreview.setAttribute('aria-hidden', 'true');
        }

        function closeModal() {
            modalDim.style.display = 'none';
            modalDim.setAttribute('aria-hidden', 'true');
            imagesSelector.style.display = 'none';
            imagesSelector.setAttribute('aria-hidden', 'true');
            boardPreview.style.display = 'block';
            boardPreview.setAttribute('aria-hidden', 'false');
            // mainContent.setAttribute('aria-hidden', 'false');
            // Ìè¨Ïª§Ïä§ ÏõêÎûò ÏúÑÏπò Î≥µÍ∑Ä
            if (lastFocusedElement) lastFocusedElement.focus();
        }

        // Ïù¥ÎØ∏ÏßÄÏÖÄÎ†âÌÑ∞ Î≤ÑÌäº ÌÅ¥Î¶≠ -> Î™®Îã¨ Ïó¥Í∏∞
        if (openModalBtn) openModalBtn.addEventListener('click', openModal);

        // Î™®Îã¨ Î≤ÑÌäº ÌÅ¥Î¶≠ -> Îã´Í∏∞ + preview Î≥¥Ïù¥Í∏∞
        modalButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                closeModal();
            });
        });

        // ESCÌÇ§ ÎàåÎ†ÄÏùÑ Îïå Î™®Îã¨ Îã´Í∏∞
        document.addEventListener('keydown', e => {
            if (e.key === 'Escape' && modalDim && modalDim.style.display === 'flex') {
                e.preventDefault();
                closeModal();
            }
        });

        // Î™®Îã¨ Î∞îÍπ• ÏòÅÏó≠ ÌÅ¥Î¶≠ Ïãú Î™®Îã¨ Îã´Í∏∞ (optional)
        if (modalDim) {
            modalDim.addEventListener('click', e => {
                if (e.target === modalDim) {
                    closeModal();
                }
            });
        }
    });

    // ---- ÎÇ†Ïßú input ÎùºÎ≤® Í¥ÄÎ†® ----

    document.addEventListener("DOMContentLoaded", function () {
        const input = document.getElementById('input-date');
        const label = document.querySelector('label[for="input-date"]');
        // Ïò§Îäò ÎÇ†Ïßú Íµ¨ÌïòÍ∏∞ (YYYY-MM-DD)
        const today = new Date();
        const yyyy = today.getFullYear();
        const mm = String(today.getMonth() + 1).padStart(2, '0');
        const dd = String(today.getDate()).padStart(2, '0');
        const todayStr = `${yyyy}-${mm}-${dd}`;
        // ‚úÖ input Í∏∞Î≥∏Í∞í ÏÑ§Ï†ï
        if (input) input.value = todayStr;
        // ‚úÖ labelÏóêÎèÑ Ïò§Îäò ÎÇ†Ïßú ÌëúÏãú
        if (label) label.textContent = today.toLocaleDateString('ko-KR', {
            year: 'numeric',
            month: 'long',
            day: 'numeric',
        });
        // ‚úÖ ÎÇ†Ïßú Î≥ÄÍ≤Ω Ïãú label ÏóÖÎç∞Ïù¥Ìä∏
        if (input && label) {
            input.addEventListener('input', () => {
                if (input.value) {
                    const selectedDate = new Date(input.value);
                    label.textContent = selectedDate.toLocaleDateString('ko-KR', {
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric',
                    });
                } else {
                    label.textContent = '';
                }
            });
        }
    });


</script>

<script src="../../assets/js/common.js"></script>
</html>